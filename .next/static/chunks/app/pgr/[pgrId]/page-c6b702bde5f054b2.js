(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{3085:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(5155),r=s(2115),o=s(2544),i=s(6942),l=s(63);function n(e,t){let[s,a]=(0,r.useState)(()=>{try{let s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.error('Erro ao ler do localStorage (chave: "'.concat(e,'"):'),s),t}});return(0,r.useEffect)(()=>{try{window.localStorage.setItem(e,JSON.stringify(s))}catch(t){console.error('Erro ao salvar no localStorage (chave: "'.concat(e,'"):'),t)}},[e,s]),[s,a]}var d=s(8433),c=s(1508);let x=e=>c.YjP().min(1,"".concat(e," \xe9 obrigat\xf3rio"));c.YjP().min(14,"CNPJ inv\xe1lido").regex(/^\d{14}|\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,"CNPJ inv\xe1lido");let m=c.YjP().regex(/^(?:0[1-9]|[12]\d|3[01])\/(?:0[1-9]|1[0-2])\/\d{4}$/,"Data inv\xe1lida (use DD/MM/AAAA)"),u=c.Ikc({empresaGrupo:x("Grupo"),empresaEmpresa:x("Empresa"),empresaCnpj:x("CNPJ"),empresaRazaoSocial:x("Raz\xe3o Social"),empresaCnae:x("CNAE"),empresaGrauRisco:x("Grau de Risco"),empresaDescricaoAtividade:x("Descri\xe7\xe3o de Atividade Principal"),empresaEndereco:x("Endere\xe7o"),estNome:x("Nome do Estabelecimento"),estCnpj:c.YjP().optional(),estTipo:c.k5n(["proprio","terceirizado"]),estRazaoSocial:c.YjP().optional(),estCnae:c.YjP().optional(),estGrauRisco:c.YjP().optional(),estDescricaoAtividade:c.YjP().optional(),estEndereco:c.YjP().optional(),contNomeFantasia:c.YjP().optional(),contRazaoSocial:c.YjP().optional(),contCnae:c.YjP().optional(),contGrauRisco:c.YjP().optional(),contDescricaoAtividade:c.YjP().optional(),contEndereco:c.YjP().optional(),gheDescricaoProcesso:x("Descri\xe7\xe3o Sucinta do Processo Produtivo"),gheObservacoes:c.YjP().optional(),gheAmbiente:x("Descri\xe7\xe3o Ambiente do GHE"),medidasGhe:x("GHE"),medidasDescAgente:x("Descri\xe7\xe3o do Agente de Risco"),medidasControle:x("Medidas de Controle"),medidasEpc:x("EPC"),medidasEpi:x("EPI / C.A."),planoNr:x("NR"),planoData:m,planoMedidasGerais:x("Medidas Gerais"),planoRisco:x("Risco"),planoClassificacao:x("Classifica\xe7\xe3o"),planoAcoes:x("A\xe7\xf5es"),anexoDiretrizPdf:x("Diretriz para Gera\xe7\xe3o do PDF")}).superRefine((e,t)=>{[e.contNomeFantasia,e.contRazaoSocial,e.contCnae,e.contGrauRisco,e.contDescricaoAtividade,e.contEndereco].some(e=>e&&""!==e.trim())&&(e.contNomeFantasia&&""!==e.contNomeFantasia.trim()||t.addIssue({code:c.eqx.custom,message:"Nome Fantasia \xe9 obrigat\xf3rio se a se\xe7\xe3o Contratante for preenchida.",path:["contNomeFantasia"]}),e.contCnae&&""!==e.contCnae.trim()||t.addIssue({code:c.eqx.custom,message:"CNAE \xe9 obrigat\xf3rio se a se\xe7\xe3o Contratante for preenchida.",path:["contCnae"]}))}),g=u.pick({empresaGrupo:!0,empresaEmpresa:!0,empresaCnpj:!0,empresaRazaoSocial:!0,empresaCnae:!0,empresaGrauRisco:!0,empresaDescricaoAtividade:!0,empresaEndereco:!0,estNome:!0,estCnpj:!0,estTipo:!0,estRazaoSocial:!0,estCnae:!0,estGrauRisco:!0,estDescricaoAtividade:!0,estEndereco:!0,contNomeFantasia:!0,contRazaoSocial:!0,contCnae:!0,contGrauRisco:!0,contDescricaoAtividade:!0,contEndereco:!0}),p=u.pick({gheDescricaoProcesso:!0,gheObservacoes:!0,gheAmbiente:!0}),h=u.pick({medidasGhe:!0,medidasDescAgente:!0,medidasControle:!0,medidasEpc:!0,medidasEpi:!0}),b=u.pick({planoNr:!0,planoData:!0,planoMedidasGerais:!0,planoRisco:!0,planoClassificacao:!0,planoAcoes:!0}),f=u.pick({anexoDiretrizPdf:!0}),j=[{id:1,setor:"Setor 1",name:"Fun\xe7\xe3o A",description:"Descri\xe7\xe3o da Fun\xe7\xe3o A"},{id:2,setor:"Setor 1",name:"Fun\xe7\xe3o B",description:"Descri\xe7\xe3o da Fun\xe7\xe3o B"},{id:3,setor:"Setor 2",name:"Fun\xe7\xe3o C",description:"Descri\xe7\xe3o da Fun\xe7\xe3o C"},{id:4,setor:"Setor 2",name:"Fun\xe7\xe3o D",description:"Descri\xe7\xe3o da Fun\xe7\xe3o D"},{id:5,setor:"Setor 3",name:"Fun\xe7\xe3o E",description:"Descri\xe7\xe3o da Fun\xe7\xe3o E"}],y={tipoAgente:"",descricaoAgente:"",perigo:"",meioPropagacao:"",fontesCircunstancias:"",tipoAvaliacao:"",intensidadeConcentracao:"",severidade:"",probabilidade:"",classificacaoRisco:""},v={empresaGrupo:"Value",empresaEmpresa:"Value",empresaCnpj:"Value",empresaRazaoSocial:"Value",empresaCnae:"Value",empresaGrauRisco:"Value",empresaDescricaoAtividade:"Value",empresaEndereco:"Value",estNome:"",estCnpj:"",estTipo:"proprio",estRazaoSocial:"",estCnae:"",estGrauRisco:"",estDescricaoAtividade:"",estEndereco:"",contNomeFantasia:"",contRazaoSocial:"",contCnae:"",contGrauRisco:"",contDescricaoAtividade:"",contEndereco:"",gheDescricaoProcesso:"",gheObservacoes:"",gheAmbiente:"",medidasGhe:"",medidasDescAgente:"",medidasControle:"",medidasEpc:"",medidasEpi:"",planoNr:"",planoData:"",planoMedidasGerais:"",planoRisco:"",planoClassificacao:"",planoAcoes:"",anexoDiretrizPdf:""},N=[{id:"inicio",label:"In\xedcio"},{id:"historico",label:"Hist\xf3rico de Vers\xf5es"},{id:"dados",label:"Dados Cadastrais"},{id:"ghe",label:"Descri\xe7\xe3o do GHE"},{id:"caracterizacao",label:"Caracteriza\xe7\xe3o de Risco"},{id:"medidas",label:"Descri\xe7\xe3o das Medidas de Preven\xe7\xe3o Implementadas"},{id:"plano",label:"Plano de A\xe7\xe3o"},{id:"anexos",label:"Inclus\xe3o de Anexos"},{id:"revisao",label:"Revis\xe3o de Campos"}],w={2:[...Object.keys(g.shape)],3:[...Object.keys(p.shape)],5:[...Object.keys(h.shape)],6:[...Object.keys(b.shape)],7:[...Object.keys(f.shape)]};function C(){let e=(0,l.useRouter)(),t=(0,l.useParams)().pgrId,{loadPgr:s,nextStep:c,previousStep:x,visitStep:m,markStepAsComplete:g,setCurrentStep:p}=(0,d.u)(),{currentStep:h,stepStates:b}=(0,d.S)();(0,r.useEffect)(()=>{t&&s(t)},[t,s]);let{register:f,handleSubmit:C,trigger:k,formState:{errors:R},watch:S,reset:A,setValue:E}=(0,o.mN)({resolver:(0,i.u)(u),defaultValues:v,mode:"onBlur"});(0,r.useEffect)(()=>{{let e=window.localStorage.getItem("pgr-formData-".concat(t));if(e)try{A(JSON.parse(e))}catch(e){console.error("Falha ao carregar dados do localStorage",e)}}},[t,A]);let D=S();(0,r.useEffect)(()=>{let e=setTimeout(()=>{window.localStorage.setItem("pgr-formData-".concat(t),JSON.stringify(D))},500);return()=>clearTimeout(e)},[D,t]);let[P,z]=(0,r.useState)(!1),[G,M]=n("pgr-availableFunctions-".concat(t),j),[L,F]=n("pgr-selectedFunctions-".concat(t),[]),[B,V]=(0,r.useState)(new Set),[I,O]=(0,r.useState)(""),[H,W]=n("pgr-anexoBoxes-".concat(t),[{id:"art-1",title:"ART - Anota\xe7\xe3o de Responsabilidade T\xe9cnica",isRequired:!0,files:[]}]),[T,Y]=(0,r.useState)(new Map),[q,J]=n("pgr-risks-".concat(t),[]),[_,$]=(0,r.useState)(!1),[K,U]=(0,r.useState)(y),[Z,Q]=(0,r.useState)(null),[X,ee]=(0,r.useState)("add"),[et,es]=n("pgr-customEstFields-".concat(t),[]),[ea,er]=(0,r.useState)(!1),[eo,ei]=(0,r.useState)(""),[el,en]=(0,r.useState)(""),ed=()=>!H.filter(e=>e.isRequired).some(e=>0===e.files.length||!e.files.some(e=>T.has(e.id)))||(alert("Por favor, envie todos os arquivos obrigat\xf3rios (ex: ART)."),!1),ec=async e=>{let t=w[e],s=!0;if(t&&(s=await k(t)),!s)return void alert("Por favor, complete os campos obrigat\xf3rios.");(7!==e||ed())&&(g(e),c())},ex=async e=>{let t=w[e],s=!0;if(t&&(s=await k(t)),!s)return void alert("Por favor, complete os campos obrigat\xf3rios.");(7!==e||ed())&&(g(e),alert("Salvo com sucesso!"))};(0,r.useEffect)(()=>{h<N.length-1&&m(h)},[h,m]);let em=()=>b.slice(0,-1).every(e=>"complete"===e.status),eu=G.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())||e.setor.toLowerCase().includes(I.toLowerCase())).reduce((e,t)=>(e[t.setor]||(e[t.setor]=[]),e[t.setor].push(t),e),{}),eg=(e,t)=>{if(ee(e),"add"===e)Q(null),U(y);else if(t){let e=q.find(e=>e.id===t);if(!e)return void console.error("Risco n\xe3o encontrado para editar/visualizar:",t);{let{id:s,nome:a,...r}=e;U(r),Q(t)}}$(!0)},ep=e=>{if("view"===X)return;let{name:t,value:s}=e.target;U(e=>({...e,[t]:s}))};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("header",{className:"bg-[#0a3d5c] text-white px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e.push("/"),children:(0,a.jsx)("img",{src:"/brmed-new-logo.png",alt:"BR MED Logo",className:"h-13"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",className:"px-6 py-2 border border-white rounded hover:bg-[#0c4a6e] transition",children:"Sign In"}),(0,a.jsx)("button",{type:"button",className:"px-6 py-2 bg-white text-[#0a3d5c] rounded hover:bg-gray-100 transition font-medium",children:"Register"})]})]}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-4 left-0 w-full h-0.5 bg-gray-200"}),(0,a.jsx)("div",{className:"relative flex justify-between",children:N.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col items-center cursor-pointer group",style:{width:"".concat(100/N.length,"%")},onClick:()=>{m(t),p(t)},children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-2 transition-all ".concat((e=>{let t=b[e];return t?"complete"===t.status?"bg-green-600":"incomplete"===t.status?"bg-red-600":"bg-white border-2 border-gray-300":"bg-white border-2 border-gray-300"})(t)," ").concat(t===h?"ring-4 ring-gray-300":""," hover:scale-110"),children:b[t]&&"complete"===b[t].status?(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):b[t]&&"unvisited"===b[t].status?(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-300"}):null}),(0,a.jsx)("span",{className:"text-xs text-center leading-tight transition-colors ".concat((e=>{let t=b[e];return t?e===h?"font-semibold text-gray-800":"complete"===t.status?"text-green-600 font-medium":"incomplete"===t.status?"text-red-600 font-medium":"text-gray-500":"text-gray-500"})(t)),children:e.label})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-6 mt-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-gray-300"}),(0,a.jsx)("span",{className:"text-gray-600",children:"N\xe3o visitado"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-600"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Incompleto"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-600"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Completo"})]})]})]})}),(0,a.jsx)("form",{onSubmit:e=>e.preventDefault(),className:"max-w-7xl mx-auto px-6 py-8",children:(0,a.jsxs)(a.Fragment,{children:[0===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("div",{style:{width:"80px"}}),(0,a.jsx)("h1",{className:"text-3xl font-semibold text-gray-800",children:"Programa de Gerenciamento de Riscos - PGR"}),(0,a.jsxs)("button",{type:"button",onClick:c,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg h-48"},e))})]}),1===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Hist\xf3rico de Vers\xf5es"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 px-6 py-4 border-b bg-gray-50",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"Nome da Empresa"}),(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"An\xe1lise"}),(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"Altera\xe7\xe3o"}),(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"Motivo"}),(0,a.jsx)("div",{className:"font-semibold text-gray-700",children:"Data"})]}),(0,a.jsx)("div",{className:"px-6 py-32 text-center text-gray-400",children:(0,a.jsx)("p",{children:"Nenhum registro encontrado"})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 mb-8",children:[(0,a.jsx)("button",{type:"button",className:"px-6 py-2.5 bg-[#3d5368] text-white rounded-lg hover:bg-[#2c3e50] transition font-medium",children:"Editar \xfaltimo documento"}),(0,a.jsx)("button",{type:"button",className:"px-6 py-2.5 bg-[#3d5368] text-white rounded-lg hover:bg-[#2c3e50] transition font-medium",children:"Baixar PDF"})]}),(0,a.jsx)("div",{className:"flex justify-center pt-6 border-t",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(1),className:"px-10 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})})]}),2===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Dados Cadastrais"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(2),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Identifica\xe7\xe3o da Empresa:"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Grupo:"}),(0,a.jsx)("input",{type:"text",...f("empresaGrupo"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaGrupo&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaGrupo.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Empresa:"}),(0,a.jsx)("input",{type:"text",...f("empresaEmpresa"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaEmpresa&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaEmpresa.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"CNPJ:"}),(0,a.jsx)("input",{type:"text",...f("empresaCnpj"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaCnpj&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaCnpj.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Raz\xe3o Social:"}),(0,a.jsx)("input",{type:"text",...f("empresaRazaoSocial"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaRazaoSocial&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaRazaoSocial.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"CNAE:"}),(0,a.jsx)("input",{type:"text",...f("empresaCnae"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaCnae&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaCnae.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Grau de Risco:"}),(0,a.jsx)("input",{type:"text",...f("empresaGrauRisco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaGrauRisco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaGrauRisco.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o de Atividade Principal:"}),(0,a.jsx)("textarea",{rows:4,...f("empresaDescricaoAtividade"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaDescricaoAtividade&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaDescricaoAtividade.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Endere\xe7o:"}),(0,a.jsx)("textarea",{rows:4,...f("empresaEndereco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.empresaEndereco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.empresaEndereco.message})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Identifica\xe7\xe3o do Estabelecimento"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Nome do Estabelecimento:"}),(0,a.jsx)("input",{type:"text",...f("estNome"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estNome&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estNome.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"CNPJ:"}),(0,a.jsx)("input",{type:"text",...f("estCnpj"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estCnpj&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estCnpj.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2",children:"Estabelecimento:"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>E("estTipo","proprio",{shouldValidate:!0}),className:"flex-1 px-4 py-2 rounded-lg transition font-medium text-sm ".concat("proprio"===D.estTipo?"bg-[#0a3d5c] text-white hover:bg-[#083047]":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Pr\xf3prio"}),(0,a.jsx)("button",{type:"button",onClick:()=>E("estTipo","terceirizado",{shouldValidate:!0}),className:"flex-1 px-4 py-2 rounded-lg transition font-medium text-sm ".concat("terceirizado"===D.estTipo?"bg-[#0a3d5c] text-white hover:bg-[#083047]":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Terceirizado"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Raz\xe3o Social:"}),(0,a.jsx)("input",{type:"text",...f("estRazaoSocial"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estRazaoSocial&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estRazaoSocial.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"CNAE:"}),(0,a.jsx)("input",{type:"text",...f("estCnae"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estCnae&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estCnae.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Grau de Risco:"}),(0,a.jsx)("input",{type:"text",...f("estGrauRisco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estGrauRisco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estGrauRisco.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o de Atividade Principal:"}),(0,a.jsx)("textarea",{rows:4,...f("estDescricaoAtividade"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estDescricaoAtividade&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estDescricaoAtividade.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Endere\xe7o:"}),(0,a.jsx)("textarea",{rows:4,...f("estEndereco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.estEndereco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.estEndereco.message})]}),et.length>0&&(0,a.jsx)("hr",{className:"border-gray-200"}),et.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:[e.label,":"]}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void es(e=>e.map(e=>e.id===s?{...e,value:a}:e))},className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void es(e=>e.filter(e=>e.id!==t))},className:"absolute right-2 top-1/2 -translate-y-1/2 text-red-500 hover:text-red-700 bg-gray-200 rounded w-6 h-6 flex items-center justify-center text-2xl font-bold opacity-0 group-hover:opacity-100 transition-opacity",title:"Remover Campo",children:"-"})]},e.id)),ea&&(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Nome do Novo Campo:"}),(0,a.jsx)("input",{type:"text",value:eo,onChange:e=>ei(e.target.value),placeholder:"Insira o nome do campo (ex: CNAE)",autoFocus:!0,className:"w-full pt-6 pb-2 px-3 bg-white border border-gray-300 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Valor do Campo:"}),(0,a.jsx)("input",{type:"text",value:el,onChange:e=>en(e.target.value),placeholder:"Insira o valor",className:"w-full pt-6 pb-2 px-3 bg-white border border-gray-300 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{ei(""),en(""),er(!1)},className:"text-red-500 hover:text-red-700 bg-gray-200 rounded w-8 h-8 flex items-center justify-center text-2xl font-bold",title:"Cancelar",children:"-"}),(0,a.jsx)("button",{type:"button",onClick:()=>{if(""===eo.trim())return void alert("Por favor, d\xea um nome v\xe1lido ao campo.");es(e=>[...e,{id:"custom-est-".concat(Date.now()),label:eo,value:el}]),ei(""),en(""),er(!1)},className:"text-green-600 hover:text-green-800 bg-gray-200 rounded w-8 h-8 flex items-center justify-center text-2xl font-bold",title:"Salvar Campo",children:"+"})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>er(!0),disabled:ea,className:"w-full px-6 py-2.5 bg-[#0a3d5c] text-white rounded-lg transition font-medium text-sm enabled:hover:bg-[#083047] disabled:opacity-50",children:"Adicionar Campo"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Identifica\xe7\xe3o da Contratante"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Nome Fantasia:"}),(0,a.jsx)("input",{type:"text",...f("contNomeFantasia"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contNomeFantasia&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contNomeFantasia.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Raz\xe3o Social:"}),(0,a.jsx)("input",{type:"text",...f("contRazaoSocial"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contRazaoSocial&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contRazaoSocial.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"CNAE:"}),(0,a.jsx)("input",{type:"text",...f("contCnae"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contCnae&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contCnae.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Grau de Risco:"}),(0,a.jsx)("input",{type:"text",...f("contGrauRisco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contGrauRisco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contGrauRisco.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o de Atividade Principal:"}),(0,a.jsx)("textarea",{rows:4,...f("contDescricaoAtividade"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contDescricaoAtividade&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contDescricaoAtividade.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Endere\xe7o:"}),(0,a.jsx)("textarea",{rows:4,...f("contEndereco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.contEndereco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.contEndereco.message})]})]})]}),(0,a.jsx)("div",{className:"flex justify-center mt-8 border-t pt-6",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(2),className:"px-16 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})})]}),3===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Descri\xe7\xe3o do GHE"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(3),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o Sucinta do Processo Produtivo:"}),(0,a.jsx)("input",{type:"text",...f("gheDescricaoProcesso"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.gheDescricaoProcesso&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.gheDescricaoProcesso.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Observa\xe7\xf5es do GHE:"}),(0,a.jsx)("textarea",{rows:3,...f("gheObservacoes"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.gheObservacoes&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.gheObservacoes.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o Ambiente do GHE:"}),(0,a.jsx)("textarea",{rows:3,...f("gheAmbiente"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.gheAmbiente&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.gheAmbiente.message})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>z(!0),className:"px-6 py-2.5 bg-[#3d5368] text-white rounded-lg hover:bg-[#2c3e50] transition font-medium",children:"Adicionar Fun\xe7\xf5es ao GHE"})}),(0,a.jsx)("div",{className:"overflow-x-auto mt-6",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Setor"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Fun\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Descri\xe7\xe3o de Atividades"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"N\xba de Funcion\xe1rios"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"A\xe7\xe3o"})]})}),(0,a.jsxs)("tbody",{children:[0===L.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-8",children:"Nenhuma fun\xe7\xe3o selecionada."})}),L.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.setor}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.description}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("input",{type:"number",value:e.numFuncionarios,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void F(L.map(e=>e.id===s?{...e,numFuncionarios:a}:e))},className:"w-20 px-2 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=L.find(t=>t.id===e);if(!t)return;F(L.filter(t=>t.id!==e));let{numFuncionarios:s,...a}=t;M([...G,a])})(e.id),className:"text-red-600 hover:text-red-800",title:"Remover",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})})]},e.id))]})]})}),(0,a.jsx)("div",{className:"flex justify-center pt-6 border-t mt-8",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(3),className:"px-16 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})})]})]}),4===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Caracteriza\xe7\xe3o de Risco"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(4),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-6 flex flex-col",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eg("add"),className:"px-8 py-3 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium self-end mb-6",children:"Adicionar Risco"}),(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden flex-grow",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Riscos atribu\xeddos a um GHE"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700",children:"Fun\xe7\xe3o"}),(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-gray-700 w-24 text-center",children:"A\xe7\xf5es"})]})}),(0,a.jsxs)("tbody",{children:[0===q.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"text-center text-gray-400 py-8",children:"Nenhum risco adicionado."})}),q.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-800",children:e.nome}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-800"}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eg("view",e.id),className:"text-gray-400 hover:text-blue-600",title:"Visualizar",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,a.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})}),(0,a.jsx)("button",{type:"button",onClick:()=>eg("edit",e.id),className:"text-gray-400 hover:text-yellow-600",title:"Editar",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),(0,a.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void(window.confirm("Tem certeza que deseja excluir este risco?")&&J(q.filter(e=>e.id!==t)))},className:"text-gray-400 hover:text-red-600",title:"Excluir",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]})})]},e.id))]})]})}),(0,a.jsx)("div",{className:"flex justify-center pt-6 border-t mt-8",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(4),className:"px-8 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar e gerar GHT"})})]}),_&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-5 border-b",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["add"===X&&"Adicionar Novo Risco","edit"===X&&"Editar Risco","view"===X&&"Visualizar Risco"]}),(0,a.jsx)("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-5 overflow-y-auto flex-grow space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo de Agente de Risco:"}),(0,a.jsx)("input",{type:"text",name:"tipoAgente",value:K.tipoAgente,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descri\xe7\xe3o do Agente de Risco:"}),(0,a.jsx)("textarea",{name:"descricaoAgente",rows:2,value:K.descricaoAgente,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Perigo:"}),(0,a.jsx)("input",{type:"text",name:"perigo",value:K.perigo,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Meio de Propaga\xe7\xe3o:"}),(0,a.jsx)("input",{type:"text",name:"meioPropagacao",value:K.meioPropagacao,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Fontes ou Circunst\xe2ncias:"}),(0,a.jsx)("input",{type:"text",name:"fontesCircunstancias",value:K.fontesCircunstancias,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo de Avalia\xe7\xe3o:"}),(0,a.jsx)("input",{type:"text",name:"tipoAvaliacao",value:K.tipoAvaliacao,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Intensidade/Concentra\xe7\xe3o:"}),(0,a.jsx)("input",{type:"text",name:"intensidadeConcentracao",value:K.intensidadeConcentracao,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Severidade:"}),(0,a.jsx)("input",{type:"text",name:"severidade",value:K.severidade,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Probabilidade:"}),(0,a.jsx)("input",{type:"text",name:"probabilidade",value:K.probabilidade,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Classifica\xe7\xe3o do Risco:"}),(0,a.jsx)("input",{type:"text",name:"classificacaoRisco",value:K.classificacaoRisco,onChange:ep,disabled:"view"===X,className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] outline-none disabled:bg-gray-100 disabled:text-gray-500"})]})]}),(0,a.jsxs)("div",{className:"p-5 border-t bg-gray-50 flex justify-end gap-3 rounded-b-lg",children:[(0,a.jsx)("button",{type:"button",onClick:()=>$(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"view"===X?"Fechar":"Cancelar"}),"view"!==X&&(0,a.jsx)("button",{type:"button",onClick:()=>{if(Z)J(q.map(e=>e.id===Z?{...e,...K}:e));else{let e={...K,id:"risk-".concat(Date.now()),nome:"RISCO ".concat(String(q.length+1).padStart(2,"0"))};J([...q,e])}$(!1),U(y),Q(null)},className:"px-6 py-2 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition",children:"Salvar Risco"})]})]})})]}),5===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:N[h].label}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(5),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-10",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"GHE:"}),(0,a.jsx)("textarea",{rows:10,...f("medidasGhe"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.medidasGhe&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.medidasGhe.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Descri\xe7\xe3o do Agente de Risco:"}),(0,a.jsx)("textarea",{rows:10,...f("medidasDescAgente"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.medidasDescAgente&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.medidasDescAgente.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Medidas de Controle Administrativas e/ou de Engenharia:"}),(0,a.jsx)("textarea",{rows:10,...f("medidasControle"),className:"w-full pt-10 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.medidasControle&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.medidasControle.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"EPC:"}),(0,a.jsx)("textarea",{rows:10,...f("medidasEpc"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.medidasEpc&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.medidasEpc.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"EPI / C.A.:"}),(0,a.jsx)("textarea",{rows:10,...f("medidasEpi"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.medidasEpi&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.medidasEpi.message})]})]}),(0,a.jsx)("div",{className:"flex justify-center pt-6 border-t mt-8",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(5),className:"px-16 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})})]})]}),6===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Plano de A\xe7\xe3o"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(6),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-10",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 items-end gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-3",children:[(0,a.jsx)("label",{htmlFor:"nr-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"NRs"}),(0,a.jsxs)("select",{id:"nr-select",...f("planoNr"),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none",children:[(0,a.jsx)("option",{value:"",children:"Selecione a NR"}),(0,a.jsx)("option",{value:"nr-1",children:"NR 1 - Disposi\xe7\xf5es Gerais"}),(0,a.jsx)("option",{value:"nr-2",children:"NR 2 - (Revogada)"}),(0,a.jsx)("option",{value:"nr-3",children:"NR 3 - Embargo ou Interdi\xe7\xe3o"})]}),R.planoNr&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoNr.message})]}),(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("label",{htmlFor:"data-acompanhamento",className:"block text-sm font-medium text-gray-700 mb-1",children:"Acompanhamento das Medidas de Preven\xe7\xe3o:"}),(0,a.jsx)("input",{id:"data-acompanhamento",type:"text",placeholder:"DD/MM/AAAA",...f("planoData"),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"}),R.planoData&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoData.message})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Medidas Gerais:"}),(0,a.jsx)("textarea",{rows:10,...f("planoMedidasGerais"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.planoMedidasGerais&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoMedidasGerais.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Risco:"}),(0,a.jsx)("textarea",{rows:10,...f("planoRisco"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.planoRisco&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoRisco.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"Classifica\xe7\xe3o:"}),(0,a.jsx)("textarea",{rows:10,...f("planoClassificacao"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.planoClassificacao&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoClassificacao.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute top-2 left-3 text-xs font-medium text-gray-600",children:"A\xe7\xf5es:"}),(0,a.jsx)("textarea",{rows:10,...f("planoAcoes"),className:"w-full pt-6 pb-2 px-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-900 focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none"})]}),R.planoAcoes&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.planoAcoes.message})]})]}),(0,a.jsx)("div",{className:"flex justify-center pt-6 border-t mt-8",children:(0,a.jsx)("button",{type:"button",onClick:()=>ex(6),className:"px-16 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})})]})]}),7===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Inclus\xe3o de Anexos"}),(0,a.jsxs)("button",{type:"button",onClick:()=>ec(7),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:["Avan\xe7ar",(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diretriz para Gera\xe7\xe3o do PDF"}),(0,a.jsxs)("select",{...f("anexoDiretrizPdf"),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3d5368] focus:border-transparent outline-none",children:[(0,a.jsx)("option",{value:"",children:"Selecione a diretriz"}),(0,a.jsx)("option",{value:"diretriz-1",children:"Diretriz Padr\xe3o"}),(0,a.jsx)("option",{value:"diretriz-2",children:"Diretriz Completa"})]}),R.anexoDiretrizPdf&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:R.anexoDiretrizPdf.message})]}),H.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,a.jsx)("input",{type:"text",value:e.title,disabled:e.isRequired,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void W(H.map(e=>e.id===s?{...e,title:a}:e))},className:"text-sm font-medium text-gray-700 p-1 rounded-md focus:outline-none disabled:bg-transparent disabled:border-none ".concat(!e.isRequired&&"focus:ring-2 focus:ring-[#3d5368] bg-gray-50")}),e.isRequired&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Obrigat\xf3rio)"})]}),!e.isRequired&&(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=H.find(t=>t.id===e);if(t){let e=new Map(T);t.files.forEach(t=>e.delete(t.id)),Y(e)}W(H.filter(t=>t.id!==e))})(e.id),className:"text-red-500 hover:text-red-700",title:"Excluir este anexo",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]}),(0,a.jsxs)("div",{className:"relative border border-gray-300 rounded-lg p-3 bg-white text-sm",children:["Escolher arquivos",(0,a.jsx)("span",{className:"text-gray-500 ml-2",children:"Nenhum arquivo escolhido"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:".pdf",onChange:t=>((e,t)=>{if(!t.target.files)return;let s=[],a=new Map(T);Array.from(t.target.files).forEach(e=>{let t="".concat(e.name,"-").concat(e.lastModified,"-").concat(Math.random());s.push({id:t,displayName:e.name,fileName:e.name,fileType:e.type,fileSize:e.size}),a.set(t,e)}),W(H.map(t=>t.id===e?{...t,files:[...t.files,...s]}:t)),Y(a),t.target.value=""})(e.id,t),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),(0,a.jsx)("div",{className:"space-y-2 pt-2",children:e.files.map(t=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg ".concat(T.has(t.id)?"bg-gray-50":"bg-red-50 border border-red-200"),children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v1H5V4zM5 7v11a2 2 0 002 2h8a2 2 0 002-2V7H5zm2 4a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd",fillRule:"evenodd"})}),(0,a.jsx)("input",{type:"text",value:t.displayName,onChange:s=>{var a,r,o;return a=e.id,r=t.id,o=s.target.value,void W(H.map(e=>e.id===a?{...e,files:e.files.map(e=>e.id===r?{...e,displayName:o}:e)}:e))},className:"flex-1 text-sm text-gray-800 bg-transparent border-b border-gray-300 focus:border-[#0a3d5c] focus:ring-0 outline-none"}),!T.has(t.id)&&(0,a.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"(Arquivo pendente - re-anexar)"}),(0,a.jsx)("button",{type:"button",onClick:()=>((e,t)=>{W(H.map(s=>s.id===e?{...s,files:s.files.filter(e=>e.id!==t)}:s));let s=new Map(T);s.delete(t),Y(s)})(e.id,t.id),className:"text-gray-400 hover:text-red-500",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},t.id))})]},e.id)),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 pt-6 border-t mt-8",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{W([...H,{id:"anexo-".concat(Date.now()),title:"Novo Anexo (Clique para Editar)",isRequired:!1,files:[]}])},className:"flex items-center gap-2 px-6 py-2 border border-gray-400 text-gray-700 rounded-lg hover:bg-gray-100 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Adicionar Novo Anexo"]}),(0,a.jsx)("button",{type:"button",onClick:()=>ex(7),className:"px-16 py-2.5 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition font-medium",children:"Salvar"})]})]})]}),8===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{type:"button",onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:N[h].label}),(0,a.jsx)("div",{style:{width:"68px"}})]}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-gray-600 mb-6 -mt-4",children:["Editando PGR: ",(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:t})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Revis\xe3o de campos anteriores:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Revise os campos completados, edite um de cada vez:"}),(0,a.jsx)("div",{className:"space-y-2",children:N.map((e,t)=>0===t||t===N.length-1?null:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label})}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("button",{type:"button",onClick:()=>p(t),className:"text-gray-400 hover:text-blue-600",title:"Editar ".concat(e.label),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})})})]},e.id))}),(0,a.jsx)("div",{className:"flex justify-center pt-8 border-t mt-8",children:(0,a.jsx)("button",{type:"button",onClick:()=>{em()?(g(8),alert("Finalizado! Pronto para gerar PDF.")):(g(8),alert("Revis\xe3o salva. Complete todas as etapas para finalizar."))},className:"px-16 py-2.5 rounded-lg transition font-medium ".concat(em()?"bg-green-600 text-white hover:bg-green-700":"bg-[#0a3d5c] text-white hover:bg-[#083047]"),title:em()?"Finalizar e Gerar PDF":"Salvar Revis\xe3o (Complete todas as etapas para finalizar)",children:em()?"Finalizar e Gerar PDF":"Salvar Revis\xe3o"})}),!em()&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center mt-2",children:"Complete todas as etapas anteriores para habilitar a finaliza\xe7\xe3o."})]})]}),P&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-5 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Adicionar Fun\xe7\xf5es ao GHE"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{alert("L\xf3gica de importa\xe7\xe3o do Excel ainda n\xe3o implementada.")},className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition text-sm font-medium",title:"Importar planilha",children:[(0,a.jsx)("img",{src:"/excel-icon.png",alt:"Importar",className:"w-4 h-4"}),"Importar"]})]}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-5 overflow-y-auto flex-grow",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar por setor ou fun\xe7\xe3o...",value:I,onChange:e=>O(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-[#3d5368] outline-none"}),(0,a.jsxs)("div",{className:"space-y-4",children:[0===Object.keys(eu).length&&(0,a.jsx)("p",{className:"text-gray-500 text-center",children:"Nenhuma fun\xe7\xe3o encontrada."}),Object.entries(eu).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:t}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:B.has(e.id),onChange:()=>(e=>{let t=new Set(B);t.has(e)?t.delete(e):t.add(e),V(t)})(e.id),className:"w-5 h-5 rounded text-[#0a3d5c] focus:ring-[#0a3d5c]"}),(0,a.jsxs)("span",{className:"text-sm text-gray-800",children:[e.name," - ",(0,a.jsx)("span",{className:"text-gray-600",children:e.description})]})]},e.id))})]},t)})]})]}),(0,a.jsxs)("div",{className:"p-5 border-t bg-gray-50 flex justify-end gap-3 rounded-b-lg",children:[(0,a.jsx)("button",{type:"button",onClick:()=>z(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancelar"}),(0,a.jsx)("button",{type:"button",onClick:()=>{F([...L,...G.filter(e=>B.has(e.id)).map(e=>({...e,numFuncionarios:0}))]),M(G.filter(e=>!B.has(e.id))),V(new Set),z(!1)},className:"px-6 py-2 bg-[#0a3d5c] text-white rounded-lg hover:bg-[#083047] transition",disabled:0===B.size,children:"Adicionar Selecionadas"})]})]})})]})})]})}},8433:(e,t,s)=>{"use strict";s.d(t,{S:()=>n,u:()=>l});var a=s(5959),r=s(9863);let o={currentStep:0,stepStates:[{status:"complete",visited:!0},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"unvisited",visited:!1},{status:"complete",visited:!0}]},i={activePgrId:null,pgrStates:{}},l=(0,a.v)((0,r.Zr)((e,t)=>({...i,loadPgr:s=>{let{pgrStates:a}=t();a[s]?e({activePgrId:s}):e(e=>({activePgrId:s,pgrStates:{...e.pgrStates,[s]:JSON.parse(JSON.stringify(o))}}))},resetPgrState:t=>{e(e=>{let s={...e.pgrStates};return s[t]=JSON.parse(JSON.stringify(o)),{pgrStates:s}})},setCurrentStep:s=>{let{activePgrId:a}=t();a&&e(e=>{let t=e.pgrStates[a];return{pgrStates:{...e.pgrStates,[a]:{...t,currentStep:s}}}})},nextStep:()=>{let{activePgrId:e,pgrStates:s}=t();if(!e)return;let{currentStep:a,stepStates:r}=s[e];a<r.length-1&&t().setCurrentStep(a+1)},previousStep:()=>{let{activePgrId:e,pgrStates:s}=t();if(!e)return;let{currentStep:a}=s[e];a>0&&t().setCurrentStep(a-1)},visitStep:s=>{let{activePgrId:a}=t();a&&e(e=>{let t=e.pgrStates[a],r=t.stepStates[s];if(!r||"complete"===r.status||r.visited)return e;let o=[...t.stepStates];return o[s]={...o[s],visited:!0,status:"incomplete"},{pgrStates:{...e.pgrStates,[a]:{...t,stepStates:o}}}})},markStepAsComplete:s=>{let{activePgrId:a}=t();a&&e(e=>{let t=e.pgrStates[a],r=[...t.stepStates];return r[s]={...r[s],status:"complete",visited:!0},{pgrStates:{...e.pgrStates,[a]:{...t,stepStates:r}}}})}}),{name:"pgr-workflow-storage",storage:(0,r.KU)(()=>localStorage)})),n=()=>l(e=>e.activePgrId&&e.pgrStates[e.activePgrId]?e.pgrStates[e.activePgrId]:o)},9665:(e,t,s)=>{Promise.resolve().then(s.bind(s,3085))}},e=>{e.O(0,[416,441,255,358],()=>e(e.s=9665)),_N_E=e.O()}]);